{% from "macros.html" import load_messages %}

<img id="preview-img" class="hidden" width="320">
<div id="messages">
  <div id="message-view">
    <ol class="messages">
      {{ load_messages(messages) }}
    </ol>
  </div>

  <div id="message-detail" class="hidden"></div>

  <form method="post" id="message-form" enctype="multipart/form-data" class="hidden">
    <span id="current-contact"></span>
    <textarea name="message" placeholder="write your message (maximum 200 characters)"></textarea>
    <input type="file" name="photo" id="photo-file" accept="image/*">
    <input type="hidden" name="email">
    <input type="hidden" name="ttl" value="10">
    <div class="button-wrapper">
      <button data-action="upload-photo" type="button">upload</button>
    </div>
    <div id="message-status"></div>
    <a href="javascript:;" data-action="cancel" class="cancel">Cancel</a>
    <button type="submit" class="right">Send</button>
  </form>

  <div id="settings" class="hidden">
    <form method="post" id="contacts-form">
      <h2>Add a new contact</h2>
      <input type="text" name="email" placeholder="add contact email">
      <div id="contact-status"></div>
      <button type="submit" class="right">Add</button>
    </form>

    <form method="post" id="email-notification-form">
      <h2>Email notifications</h2>
      <p class="tip">
        <input type="checkbox" name="emailNotification" {% if email_notification %}checked="checked"{% endif %}>
        when someone sends you a message
      </p>
      <div id="email-notification-status"></div>
      <a href="javascript:;" data-action="cancel" class="cancel">Close</a>
      <button type="submit" class="right">Update</button>
    </form>
  </div>
  <div id="message-body"></div>

  <div id="footer">
    <a href="javascript:;" data-action="new-message" id="new-message">New</a>
    <a href="javascript:;" data-action="messages">Messages</a>
    <a href="javascript:;" data-action="settings-form">Settings</a>
    <a href="javascript:;" data-action="logout">Log out</a>
  </div>
</div>
